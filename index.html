<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Flexible Student Marks Entry (Students as rows, Subjects as columns)</title>
  <style>
    body { font-family: Arial, sans-serif; }
    table { border-collapse: collapse; margin: 20px 0; width: 80%; }
    th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
    th { background: #f0f0f0; }
    input[type="text"], input[type="number"] { width: 90%; padding: 2px; }
    .hint { font-size: 90%; color: #555; }
    button { margin-right: 5px; }
    #controls { margin-bottom: 10px; }
    #studentCount, #subjectCount { width: 60px; }
  </style>
</head>
<body>
  <h1>Flexible Student Marks Entry</h1>

  <div class="hint">
    <strong>Instructions:</strong> Adjust the number of students and subjects. Leave a cell blank if a student did <b>not take</b> that subject. Enter <b>0</b> if a student was <b>absent</b> for that subject. Enter marks otherwise.
  </div>

  <div id="controls">
    <label>
      Number of Subjects:
      <input type="number" id="subjectCount" min="1" value="2" onchange="updateSubjectColumns()">
    </label>
    &nbsp;|&nbsp;
    <label>
      Number of Students:
      <input type="number" id="studentCount" min="1" value="2" onchange="updateStudentRows()">
    </label>
  </div>

  <table id="marksTable">
    <thead>
      <tr>
        <th>Student Name / Roll</th>
        <th><input type="text" placeholder="Subject 1"></th>
        <th><input type="text" placeholder="Subject 2"></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input type="text" placeholder="Student 1"></td>
        <td><input type="number" min="0"></td>
        <td><input type="number" min="0"></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Student 2"></td>
        <td><input type="number" min="0"></td>
        <td><input type="number" min="0"></td>
      </tr>
    </tbody>
  </table>

  <script>
    // Ensure subject columns match subjectCount input
    function updateSubjectColumns() {
      const table = document.getElementById('marksTable');
      const subjectCount = parseInt(document.getElementById('subjectCount').value, 10) || 2;
      const theadRow = table.tHead.rows[0];
      const currentCols = theadRow.cells.length - 1; // First col is Student Name/Roll

      // Add new subject columns if needed
      while (currentCols < subjectCount) {
        const th = document.createElement('th');
        th.innerHTML = `<input type="text" placeholder="Subject ${currentCols + 1}">`;
        theadRow.appendChild(th);
        // Add to tbody rows
        for (let i = 0; i < table.tBodies[0].rows.length; ++i) {
          const td = document.createElement('td');
          td.innerHTML = `<input type="number" min="0">`;
          table.tBodies[0].rows[i].appendChild(td);
        }
      }
      // Remove extra subject columns if needed
      while (currentCols > subjectCount) {
        theadRow.deleteCell(-1);
        for (let i = 0; i < table.tBodies[0].rows.length; ++i) {
          table.tBodies[0].rows[i].deleteCell(-1);
        }
      }
    }

    // Ensure student rows match studentCount input
    function updateStudentRows() {
      const table = document.getElementById('marksTable');
      const studentCount = parseInt(document.getElementById('studentCount').value, 10) || 2;
      const colCount = table.tHead.rows[0].cells.length;
      let tbody = table.tBodies[0];
      let currentRows = tbody.rows.length;

      // Add rows if needed
      while (currentRows < studentCount) {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td><input type="text" placeholder="Student ${currentRows + 1}"></td>`;
        for (let i = 1; i < colCount; ++i) {
          tr.innerHTML += `<td><input type="number" min="0"></td>`;
        }
        tbody.appendChild(tr);
        currentRows++;
      }
      // Remove rows if needed
      while (currentRows > studentCount) {
        tbody.deleteRow(tbody.rows.length - 1);
        currentRows--;
      }
    }
  </script>
</body>
</html>
